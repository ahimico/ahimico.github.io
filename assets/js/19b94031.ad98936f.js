(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[218],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return d}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(n),d=r,h=m["".concat(p,".").concat(d)]||m[d]||u[d]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6714:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return c},default:function(){return m}});var a=n(2122),r=n(9756),o=(n(7294),n(3905)),i=["components"],l={slug:"aptor-is-all-you-need",title:"Aptor Is All You Need",author:"Amir.H Ebrahimi",author_title:"Frontend developer @Weblite",author_url:"https://github.com/amirHossein-Ebrahimi",author_image_url:"https://avatars.githubusercontent.com/u/23579958?s=48&v=4",tags:["react-aptor","react","api"]},p=void 0,s={permalink:"/blog/aptor-is-all-you-need",editUrl:"https://github.com/ahimico/ahimico.github.io/edit/master/website/blog/2021-05-26-aptor-is-all-you-need.md",source:"@site/blog/2021-05-26-aptor-is-all-you-need.md",title:"Aptor Is All You Need",description:"Get rid off all old-style class-based integration for every react-something packages within minutes.",date:"2021-05-26T00:00:00.000Z",formattedDate:"May 26, 2021",tags:[{label:"react-aptor",permalink:"/blog/tags/react-aptor"},{label:"react",permalink:"/blog/tags/react"},{label:"api",permalink:"/blog/tags/api"}],readingTime:2.82,truncated:!0,prevItem:{title:"console.log([`Arrays`])",permalink:"/blog/console-log-arrays"}},c=[{value:"TLDR",id:"tldr",children:[]},{value:"Story",id:"story",children:[]},{value:"Aptor",id:"aptor",children:[]},{value:"Conclusion",id:"conclusion",children:[]}],u={toc:c};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Get rid off")," all old-style class-based integration for every react-something packages within minutes."),(0,o.kt)("h2",{id:"tldr"},"TLDR"),(0,o.kt)("p",null,"The dominant ",(0,o.kt)("inlineCode",{parentName:"p"},"react-something")," packages are based on old-style class-based integration that includes a third-party and a react wrapper that defines new things for each existing API in that third party. The best available method is to bind a ",(0,o.kt)("inlineCode",{parentName:"p"},"ref")," filling the integration gap through the react ref system."),(0,o.kt)("p",null,"We propose a new simple package, the ",(0,o.kt)("inlineCode",{parentName:"p"},"react-aptor"),", based solely on integration mechanisms, removing the middle effect of react packages entirely."),(0,o.kt)("h2",{id:"story"},"Story"),(0,o.kt)("p",null,"Let\u2019s say there comes a trending video package called ",(0,o.kt)("inlineCode",{parentName:"p"},"doom.js"),", featured just recently on npm. The doom package has been developed in typescript compatible with all frameworks and libraries. Now the community tries to help the author and make integrated packages on their own \ud83d\ude4c\ufe0f."),(0,o.kt)("p",null,'Let\u2019s make it simple, doom can only play/pause a video for now. It might not be cool enough to win the "Breakthrough of the year\u201d, but it is definitely one of the best \ud83d\ude04.'),(0,o.kt)("p",null,"Then we are going to make a react package out of it, called ",(0,o.kt)("inlineCode",{parentName:"p"},"react-doom"),". It is going to be something like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"<ReactDoom src={'video-url'} isPlaying={false} ref={playerRef} />\n")),(0,o.kt)("p",null,"Then users can play/pause the video with their UI using ",(0,o.kt)("inlineCode",{parentName:"p"},"playerRef.current")),(0,o.kt)("p",null,"Everything is fine, let\u2019s add a new highly voted feature to ",(0,o.kt)("inlineCode",{parentName:"p"},"doom.js")," to change the speed of the video."),(0,o.kt)("p",null,"Author starts coding",(0,o.kt)("br",{parentName:"p"}),"\n","Boom \ud83d\udca5",(0,o.kt)("br",{parentName:"p"}),"\n","The author finishes the feature",(0,o.kt)("br",{parentName:"p"}),"\n","It is now running tests",(0,o.kt)("br",{parentName:"p"}),"\n","All test passed \ud83d\udd7a",(0,o.kt)("br",{parentName:"p"}),"\n","Doom.js is going to be published",(0,o.kt)("br",{parentName:"p"}),"\n","OMG it is also compatible",(0,o.kt)("br",{parentName:"p"}),"\n","The new minor version is coming \u2026",(0,o.kt)("br",{parentName:"p"}),"\n","Done \ud83c\udd97  "),(0,o.kt)("p",null,"So let\u2019s update our ",(0,o.kt)("inlineCode",{parentName:"p"},"react-doom")," package and use the new 2x feature on our videos.",(0,o.kt)("br",{parentName:"p"}),"\n",(0,o.kt)("inlineCode",{parentName:"p"},"Published 25 days ago"),", Okay let\u2019s check their issue, it must be under ",(0,o.kt)("inlineCode",{parentName:"p"},"doing")," board",(0,o.kt)("br",{parentName:"p"}),"\n","last interaction for the author is ",(0,o.kt)("inlineCode",{parentName:"p"},"2 months ago"),(0,o.kt)("br",{parentName:"p"}),"\n","So what, making another ",(0,o.kt)("strong",{parentName:"p"},"Old guy pc Meme!")),(0,o.kt)("h2",{id:"aptor"},"Aptor"),(0,o.kt)("p",null,"Why should react wrapper block the development phase of a package?"),(0,o.kt)("p",null,"Connect your doom.js to ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/react-aptor"},"react-aptor")," then you have all the functionality.\nUse a tiny wrapper around the connected component. Do every of the following you want"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Trigger prop changes using ",(0,o.kt)("inlineCode",{parentName:"li"},"useEffect")),(0,o.kt)("li",{parentName:"ul"},"Change namings"),(0,o.kt)("li",{parentName:"ul"},"Hoist full access reference to raw ",(0,o.kt)("inlineCode",{parentName:"li"},"doom.js")," API using ",(0,o.kt)("inlineCode",{parentName:"li"},"forwardRef"))),(0,o.kt)("p",null,"Let\u2019s call this new react package ",(0,o.kt)("inlineCode",{parentName:"p"},"raptor-doom"),".\nraptor-doom is a simple, tiny piece that helps developers to use it independent of the react package itself."),(0,o.kt)("p",null,"So in the case of the 2x feature, the only thing which is needed is to update the ",(0,o.kt)("inlineCode",{parentName:"p"},"doom.js")," package and use the rate feature out of the box."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"<RaptorDoom isPlaying={isPlaying} ref={ref} />\n<button onClick={() => {ref.current._doom.setRate(2)}}>\n speed up\n</button>\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"react-aptor")," helps you to make this process as easy as one react hook call."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title=connector.jsx",title:"connector.jsx"},"const Connector = (props, ref) => {\n  const aptorRef = useAptor(ref, {\n    // a function which returns a slice of doom.js apis\n    getAPI,\n    // a function which instantiate doom.js player\n    instantiate,\n    // anything to be used in both getAPI, instantiate\n    params: props,\n  })\n\n  // accessing node using returned ref\n  return <div ref={aptorRef} />\n}\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Get connected")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You can find lots of useful examples and integration in react-aptor ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/amirHossein-Ebrahimi/react-aptor/blob/master/doc/samples.md"},"samples section")))),(0,o.kt)("p",null,"Also there is a brand new re-write of react-howler using react-aptor making new tiny (",(0,o.kt)("inlineCode",{parentName:"p"},"1.04kB"),") package called ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/raptor-howler"},"raptor-howler")),(0,o.kt)("h2",{id:"conclusion"},"Conclusion"),(0,o.kt)("p",null,"react-aptor helps you to make functional, small, ",(0,o.kt)("strong",{parentName:"p"},"Forward Compatible")," packages within react."))}m.isMDXComponent=!0}}]);